import {
  require_react
} from "./chunk-PUF7TYPX.js";
import {
  __toESM,
  init_buffer,
  init_virtual_process_polyfill
} from "./chunk-RQY4PJ75.js";

// node_modules/@casl/react/dist/es5m/index.js
init_virtual_process_polyfill();
init_buffer();
var import_react = __toESM(require_react());
function i(t3, n2) {
  for (var r2 = 0; r2 < n2.length; r2++) {
    var i2 = n2[r2];
    i2.enumerable = i2.enumerable || false;
    i2.configurable = true;
    if ("value" in i2)
      i2.writable = true;
    Object.defineProperty(t3, i2.key, i2);
  }
}
function u(t3, n2, r2) {
  if (n2)
    i(t3.prototype, n2);
  if (r2)
    i(t3, r2);
  return t3;
}
function e() {
  e = Object.assign || function(t3) {
    for (var n2 = 1; n2 < arguments.length; n2++) {
      var r2 = arguments[n2];
      for (var i2 in r2)
        if (Object.prototype.hasOwnProperty.call(r2, i2))
          t3[i2] = r2[i2];
    }
    return t3;
  };
  return e.apply(this, arguments);
}
function o(t3, n2) {
  t3.prototype = Object.create(n2.prototype);
  t3.prototype.constructor = t3;
  f(t3, n2);
}
function f(t3, n2) {
  f = Object.setPrototypeOf || function t4(n3, r2) {
    n3.__proto__ = r2;
    return n3;
  };
  return f(t3, n2);
}
var c = function t2() {
};
var s = function(t3) {
  o(n2, t3);
  function n2() {
    var n3;
    for (var r3 = arguments.length, i2 = new Array(r3), u2 = 0; u2 < r3; u2++)
      i2[u2] = arguments[u2];
    n3 = t3.call.apply(t3, [this].concat(i2)) || this;
    n3.t = false;
    n3.i = null;
    n3.u = c;
    return n3;
  }
  var r2 = n2.prototype;
  r2.componentWillUnmount = function t4() {
    this.u();
  };
  r2.o = function _connectToAbility(t4) {
    var n3 = this;
    if (t4 === this.i)
      return;
    this.u();
    this.i = null;
    if (t4) {
      this.i = t4;
      this.u = t4.on("updated", function() {
        return n3.forceUpdate();
      });
    }
  };
  r2.h = function t4() {
    var n3 = this.props;
    var r3 = n3.of || n3.a || n3.an || n3.this || n3.on;
    var i2 = n3.not ? "cannot" : "can";
    return n3.ability[i2](n3.I || n3.do, r3, n3.field);
  };
  r2.render = function t4() {
    this.o(this.props.ability);
    this.t = this.h();
    return this.props.passThrough || this.t ? this.v() : null;
  };
  r2.v = function t4() {
    var n3 = this.props, r3 = n3.children, i2 = n3.ability;
    var u2 = "function" === typeof r3 ? r3(this.t, i2) : r3;
    return u2;
  };
  u(n2, [{ key: "allowed", get: function t4() {
    return this.t;
  } }]);
  return n2;
}(import_react.PureComponent);
function a(t3) {
  var n2, r2;
  return r2 = n2 = function(t4) {
    o(n3, t4);
    function n3() {
      return t4.apply(this, arguments) || this;
    }
    return n3;
  }(s), n2.defaultProps = { ability: t3 }, r2;
}
function h(t3) {
  return function(n2) {
    return (0, import_react.createElement)(t3, { children: function t4(i2) {
      return (0, import_react.createElement)(s, e({ ability: i2 }, n2));
    } });
  };
}
function useAbility(n2) {
  if ("function" !== typeof import_react.default.useContext)
    throw new Error("You must use React >= 16.8 in order to use useAbility()");
  var r2 = import_react.default.useContext(n2);
  var i2 = import_react.default.useState(), u2 = i2[0], e2 = i2[1];
  import_react.default.useEffect(function() {
    return r2.on("updated", function(t3) {
      if (t3.rules !== u2)
        e2(t3.rules);
    });
  }, []);
  return r2;
}
export {
  s as Can,
  a as createCanBoundTo,
  h as createContextualCan,
  useAbility
};
//# sourceMappingURL=@casl_react.js.map
